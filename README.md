# Shortly ‚Äì Encurtador de Links Seguro üîó

![Shortly Banner](public/og-image.png)

O **Shortly** √© uma aplica√ß√£o moderna para encurtamento de URLs, desenvolvida com foco em performance, seguran√ßa e experi√™ncia do usu√°rio. Diferente de encurtadores comuns, ele oferece recursos avan√ßados como prote√ß√£o por senha, data de expira√ß√£o autom√°tica e gera√ß√£o de QR Codes, tudo em uma interface limpa e responsiva.

---

## üöÄ Funcionalidades

- **Encurtamento R√°pido:** Gere links curtos aleat√≥rios ou personalize seu pr√≥prio slug (ex: `shortly.com/minha-marca`).
- **QR Codes:** Gere e baixe QR Codes (SVG/PNG) instantaneamente para qualquer link.
- **Prote√ß√£o por Senha:** Restrinja o acesso ao link final com uma senha criptografada.
- **Data de Validade:** Defina uma data e hora para o link expirar automaticamente.
- **Hist√≥rico Local:** Seus links recentes ficam salvos no navegador para acesso f√°cil.
- **Analytics:** Acompanhe a contagem de cliques e dados b√°sicos de acesso (Pa√≠s, Cidade, Dispositivo).
- **Design Responsivo:** Interface moderna que funciona perfeitamente em desktop e mobile.

---

## üõ†Ô∏è Tecnologias Utilizadas

Este projeto foi constru√≠do com as melhores pr√°ticas de desenvolvimento web moderno:

- **[Next.js 15+](https://nextjs.org/)** (App Router & Server Actions)
- **[TypeScript](https://www.typescriptlang.org/)** (Tipagem est√°tica para robustez)
- **[Tailwind CSS](https://tailwindcss.com/)** (Estiliza√ß√£o utilit√°ria e responsiva)
- **[Supabase](https://supabase.com/)** (Banco de dados PostgreSQL, Auth e Realtime)
- **bcryptjs** (Criptografia segura de senhas)
- **react-qr-code** (Gera√ß√£o de QR Codes vetorizados)
- **Geist Font** (Tipografia moderna da Vercel)

---

## üì¶ Pr√©-requisitos

Antes de come√ßar, certifique-se de ter instalado em sua m√°quina:

- [Node.js](https://nodejs.org/) (vers√£o 18 ou superior)
- Git
- Uma conta gratuita no [Supabase](https://supabase.com/) para o banco de dados

---

## üîß Instala√ß√£o e Configura√ß√£o

### 1Ô∏è‚É£ Clone o reposit√≥rio

```bash
git clone https://github.com/SEU_USUARIO/shortly.git
cd shortly
```

### 2Ô∏è‚É£ Instale as depend√™ncias

```bash
npm install
# ou
yarn install
```

### 3Ô∏è‚É£ Configure as Vari√°veis de Ambiente

Crie um arquivo chamado `.env.local` na raiz do projeto e preencha com as chaves do seu projeto Supabase (dispon√≠veis em **Project Settings > API**):

```env
# URL base da aplica√ß√£o (use localhost para desenvolvimento)
NEXT_PUBLIC_BASE_URL=http://localhost:3000

# Configura√ß√µes do Supabase
NEXT_PUBLIC_SUPABASE_URL=sua_url_do_supabase_aqui
NEXT_PUBLIC_SUPABASE_ANON_KEY=sua_chave_anonima_aqui
SUPABASE_SERVICE_ROLE_KEY=sua_chave_service_role_aqui
```

> ‚ö†Ô∏è **Aten√ß√£o:** A chave `SUPABASE_SERVICE_ROLE_KEY` √© necess√°ria para opera√ß√µes administrativas e **n√£o deve ser exposta no lado do cliente**.

---

### 4Ô∏è‚É£ Configura√ß√£o do Banco de Dados (SQL)

V√° at√© o **SQL Editor** no painel do seu projeto Supabase e execute o script abaixo. Ele criar√° as tabelas, fun√ß√µes e pol√≠ticas de seguran√ßa necess√°rias:

```sql
-- 1. Tabela de URLs
create table urls (
  id bigint generated by default as identity primary key,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  target_url text not null,
  slug text not null unique,
  clicks int default 0,
  password_hash text,
  expires_at timestamp with time zone
);

-- 2. Tabela de Cliques (Analytics)
create table clicks (
  id bigint generated by default as identity primary key,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  url_slug text references urls(slug) not null,
  country text,
  city text,
  device text,
  referrer text
);

-- 3. Fun√ß√£o RPC para incrementar cliques (Atomicidade e Seguran√ßa)
create or replace function increment_clicks(slug_input text)
returns void as $$
begin
  update urls set clicks = clicks + 1 where slug = slug_input;
end;
$$ language plpgsql;

-- 4. Pol√≠ticas de Seguran√ßa (Row Level Security - RLS)
alter table urls enable row level security;
alter table clicks enable row level security;

-- Permitir leitura p√∫blica de URLs (necess√°rio para o redirecionamento funcionar)
create policy "Enable read access for all users" on urls
for select using (true);

-- Permitir cria√ß√£o de URLs por qualquer usu√°rio (an√¥nimo ou logado)
create policy "Enable insert for all users" on urls
for insert with check (true);

-- Permitir inser√ß√£o de logs de clique pelo sistema
create policy "Enable insert for analytics" on clicks
for insert with check (true);
```

---

### 5Ô∏è‚É£ Execute o projeto

```bash
npm run dev
```

Acesse: **http://localhost:3000** no seu navegador.

---

## üöÄ Como Fazer Deploy

A maneira mais f√°cil e recomendada √© atrav√©s da **Vercel** (criadores do Next.js):

1. Fa√ßa o push do seu c√≥digo para o GitHub.
2. Crie um novo projeto na Vercel e importe seu reposit√≥rio.
3. Nas configura√ß√µes de **Environment Variables**, adicione as mesmas vari√°veis configuradas no `.env.local`.
4. Clique em **Deploy**.

---

## üìÑ Termos e Privacidade

O projeto inclui p√°ginas dedicadas para **Termos de Uso** e **Pol√≠tica de Privacidade**, essenciais para conformidade e aprova√ß√£o em plataformas de an√∫ncios como o Google AdSense:

- `/terms` ‚Äì Termos de uso e pol√≠tica anti-abuso
- `/privacy` ‚Äì Pol√≠tica de privacidade e uso de cookies

---

## ü§ù Contribui√ß√£o

Contribui√ß√µes s√£o bem-vindas! Sinta-se √† vontade para abrir uma **issue** ou enviar um **Pull Request** com melhorias.

---

## üìÑ Licen√ßa

Este projeto est√° sob a licen√ßa **MIT**. Veja o arquivo `LICENSE` para mais detalhes.

---

Desenvolvido por </> **Andr√© Lima**
